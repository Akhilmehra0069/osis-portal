{% extends "layout.html" %}
{% load staticfiles %}
{% load i18n %}

{% comment "License" %}
* OSIS stands for Open Student Information System. It's an application
* designed to manage the core business of higher education institutions,
* such as universities, faculties, institutes and professional schools.
* The core business involves the administration of students, teachers,
* courses, programs and so on.
*
* Copyright (C) 2015-2016 Universit√© catholique de Louvain (http://www.uclouvain.be)
*
* This program is free software: you can redistribute it and/or modify
* it under the terms of the GNU General Public License as published by
* the Free Software Foundation, either version 3 of the License, or
* (at your option) any later version.
*
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
* GNU General Public License for more details.
*
* A copy of this license - GNU General Public License - is available
* at the root of the source code of this program.  If not,
* see http://www.gnu.org/licenses/.
{% endcomment %}
{% block style %}
<link rel="stylesheet" href="{% static 'css/bootstrap-datepicker3.min.css' %}" type='text/css'>
{% endblock %}
{% block content %}
    <h2>{{ request.user.first_name }} {{ request.user.last_name }}</h2>
    <ul class="nav nav-tabs">
        <li class="{%if tab_active == 0 %}active{%endif%}">
            <a href="{% url 'profile' %}" id="lnk_profile_tab">
                {%if validated_profil%}
                    <span class="glyphicon glyphicon-ok-sign" aria-hidden="true" style="color:green;"></span>
                {%else%}
                    <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true" style="color:orange;"></span>
                {%endif%}
                &nbsp;&nbsp;{%trans 'profile'%}</a>
        </li>
        <li class="{%if tab_active == 1 %}active{%endif%}">
            <a href="{% url 'diploma_update'%}" id="lnk_diploma_tab">
                {%if validated_diploma%}
                    <span class="glyphicon glyphicon-ok-sign" aria-hidden="true" style="color:green;"></span>
                {%else%}
                    <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true" style="color:orange;"></span>
                {%endif%}
                &nbsp;&nbsp;{%trans 'tab_diplomas'%}</a>
        </li>
        <li class="{%if tab_active == 2 %}active{%endif%}">
            <a href="{% url 'curriculum_update' %}" id="lnk_curriculum_tab">
                {%if validated_curriculum %}
                    <span class="glyphicon glyphicon-ok-sign" aria-hidden="true" style="color:green;"></span>
                {%else%}
                    <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true" style="color:orange;"></span>
                {%endif%}
                &nbsp;&nbsp;{%trans 'curriculum'%}</a>
        </li>
        <li class="{%if tab_active == 3 or tab_active == 31 %}active{%endif%}">
            <a href="{% url 'applications' %}" id="lnk_application_tab">
                {%if validated_applications%}
                    <span class="glyphicon glyphicon-ok-sign" aria-hidden="true" style="color:green;"></span>
                {%else%}
                    <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true" style="color:orange;"></span>
                {%endif%}
                &nbsp;&nbsp;{%trans 'demandes'%}</a>
        </li>
    </ul>
    <br>
    <div class="panel panel-default">
        <div class="panel-body">
            <h5>{% trans 'mandatory_asterisk'%}</h5>
            {% block admission_tabs %}
            {% endblock %}
        </div>
    </div>
{% endblock %}

{% block script %}
    <script src="{% static 'js/bootstrap-datepicker.min.js' %}"></script>
    <script>

    $(document).ready(function() {
        if($("#slt_nationality").val()){
            $.ajax({
                url: "/admission/country?nationality=" + $("#slt_nationality").val()
            }).then(function(data) {

                if (data.european_union) {
                    $('#pnl_assimilation_criteria').css('visibility', 'hidden').css('display','none');
                }else{
                    $('#pnl_assimilation_criteria').css('visibility', 'visible').css('display','block');
                }
            });
        }
    });
    </script>
{% endblock %}