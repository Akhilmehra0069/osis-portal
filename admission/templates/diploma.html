{% extends "layout.html" %}
{% load staticfiles %}
{% load i18n %}
{% load dictionnary %}

{% comment "License" %}
* OSIS stands for Open Student Information System. It's an application
* designed to manage the core business of higher education institutions,
* such as universities, faculties, institutes and professional schools.
* The core business involves the administration of students, teachers,
* courses, programs and so on.
*
* Copyright (C) 2015-2016 Université catholique de Louvain (http://www.uclouvain.be)
*
* This program is free software: you can redistribute it and/or modify
* it under the terms of the GNU General Public License as published by
* the Free Software Foundation, either version 3 of the License, or
* (at your option) any later version.
*
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
* GNU General Public License for more details.
*
* A copy of this license - GNU General Public License - is available
* at the root of the source code of this program.  If not,
* see http://www.gnu.org/licenses/.
{% endcomment %}

{% block content %}
<script>
    function disabled_field(id,chb){
        if(chb.checked){
            document.getElementById(id).disabled = false;
        }else{
            document.getElementById(id).disabled = true;
        }
    }

    function display(id,state){
        var elt = document.getElementById(id);
        if(state){
            elt.style = "visibility:visible;display:block;";
        }else{
            elt.style = "visibility:hidden;display:none;";
        }
    }
    function display_or_hide(id,elt){
        display(id,elt.checked);
    }
    function show_hide_parcours(elt){
        //alert('show_hide_parcours');
        if (elt.selectedIndex == -1)
            return null;
        var s= elt.options[elt.selectedIndex].text;
        var pos = s.indexOf("-");
        var year=""
        if (pos > -1){
            year = s.substring(0,pos);
        }
        if(year < 1994){
            display('pnl_parcours',true);
        }else{
            display('pnl_parcours',false);
        }
    }

    function show_hide_pnl_daes(){
        //alert('show_hide_pnl_daes');
        var elt = document.getElementById('slt_academic_year');
        if (elt.selectedIndex == -1)
            return null;

        var s= elt.options[elt.selectedIndex].text;
        var pos = s.indexOf("-");
        var year=""
        if (pos > -1){
            year = s.substring(0,pos);
        }

        elt = document.getElementById('rdb_belgian_community_french');

        if(elt.checked){
            if(year < 1994){
                return display('pnl_daes',true);
            }
        }
        elt = document.getElementById('rdb_belgian_community_dutch');
        if(elt.checked){
            if(year < 1992){
               return display('pnl_daes',true);
            }
        }
        display('pnl_daes',false);
    }

    function reset_rdb(elt_name){
        x=document.getElementsByName(elt_name);
        var i;
        for (i = 0; i < x.length; i++) {
            if (x[i].type == "radio") {
                x[i].checked = false;
            }
        }
    }

    function reset_input(id){
        document.getElementById(id).value="";

    }

    function enabled_other_language(elt){
        if(elt.checked){
            document.getElementById('slt_other_language_diploma').disabled = false;
            document.getElementById('slt_language_diploma').selectedIndex = -1;
            document.getElementById('slt_country').selectedIndex = -1;
            document.getElementById('slt_language_diploma').disabled=true;
            document.getElementById('slt_country').disabled=true;
            document.getElementById('pnl_translation').style="visibility:visible;display:block;";

        }else{
            document.getElementById('slt_other_language_diploma').disabled = true;
            document.getElementById('slt_language_diploma').disabled=false;
            document.getElementById('slt_country').disabled=false;
            document.getElementById('pnl_translation').style="visibility:hidden;display:none;";
        }
    }
</script>

<form method="post" action="{% url 'diploma' application.id %}">
    {% csrf_token %}
    <div>
        <button type="submit" id="bt_previous_step_up" name="bt_previous_step_up" class="btn btn-default" role="button"
                                    title="Etape précédente">
                                    <span class="glyphicon glyphicon-step-backward" aria-hidden="true"></span>Etape précédente</button>
        <button type="submit" id="bt_save_up" name="bt_save_up" class="btn btn-default" role="button"
                                    title="Sauvegarder">
                                    <span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span>Sauvegarder</button>
        <button type="submit" id="bt_next_step_up" name="bt_next_step_up" class="btn btn-default" role="button"
                                    title="Etape suivante">
                                    <span class="glyphicon glyphicon-step-forward" aria-hidden="true"></span>Etape suivante</button>
        <br>
        <br>
    </div>
    <div class="panel panel-default"
         style="{% if application.person.register_number%}visibility:hidden;display:none;{%else%}visibility:visible;display:block;{%endif%}">
        <div class="panel-heading">Etudes secondaires</div>
        <div class="panel-body">
            <div class="row">
                <div class="col-md-12">
                    <label>Avez-vous obtenu un diplôme de fin d'études secondaires ou allez-vous l'obtenir cette année? *</label>
                    <br>
                    <span style="font-size:smaller">Le diplôme d'études secondaires est le titre nécessaire pour entamer des
                        études supérieures (universitaires, en haute-école, ...). Ex : CESS, Baccalauréat, Diplôme de
                        Maturité, Etudes Gymnasiales, Etudes Collégiales, High School, ...</span>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <label class="radio-inline">
                      <input type="radio"
                             name="diploma_sec"
                             id="rdb_diploma_sec1"
                             value="true"
                             {%if object_application.diploma_sec = True %}checked{%endif%}
                             onclick="display('pnl_academic_year',true);display('pnl_admission_exam',false);"> Oui
                    </label>
                    <label class="radio-inline">
                      <input type="radio"
                             name="diploma_sec"
                             id="rdb_diploma_sec2" value="false"
                             {%if object_application.diploma_sec = False %}checked{%endif%}
                             onclick="display('pnl_academic_year',false);display('pnl_admission_exam',true);"> Non
                    </label>
                    {%if  validation_messages and validation_messages|get_item:'diploma_sec'%}<font class="alert alert-danger" role="alert" style="margin-left:5px;">{{ validation_messages|get_item:'diploma_sec'}}</font>{% endif %}
                </div>
            </div>
            <br>
            <div id="pnl_academic_year" style="{%if object_application.diploma_sec = True %}visibility:visible;display:block;{%else%}visibility:hidden;display:none;{%endif%}" class="form-inline">
                <div class="form-group" >
                        <label style="width:400px;">
                          Veuillez indiquer l'année académique d'obtention *
                        </label>
                        <select class="form-control"
                                id="slt_academic_year"
                                name="academic_year"
                                onchange="show_hide_parcours(this);show_hide_pnl_daes();">
                            {% for academic_yr in academic_years %}
                                <option {% if academic_yr.id == object_application.academic_year.id %}selected{%endif%} value="{{ academic_yr.id }}" title="{{academic_yr.year}}">{{ academic_yr }}</option>
                            {% endfor %}
                        </select>
                </div>
                <br><br>
                <div class="form-group" >
                        <label style="width:400px;">
                          Vous avez effectué vos études secondaires *
                        </label>
                        <label class="radio-inline">
                          <input type="radio"
                                 name="rdb_belgian_foreign" id="rdb_belgium"
                                 value="true" {%if object_application.rdb_belgian_foreign = True %}checked{%endif%}
                                 onclick="display('pnl_belgian_detail',true);display('pnl_foreign_detail',false);"> En Belgique
                        </label>
                        <label class="radio-inline">
                          <input type="radio"
                                 name="rdb_belgian_foreign" id="rdb_foreign"
                                 value="false" {%if object_application.rdb_belgian_foreign = False %}checked{%endif%}
                                 onclick="display('pnl_belgian_detail',false);display('pnl_foreign_detail',true);"> A l'étranger
                        </label>
                        {%if  validation_messages and validation_messages|get_item:'rdb_belgian_foreign'%}<font class="alert alert-danger" role="alert" style="margin-left:5px;">{{ validation_messages|get_item:'rdb_belgian_foreign'}}</font>{% endif %}
                </div>
                <br>
                <br>
                {% include "diploma/diploma_belgian.html" %}

                {% include "diploma/diploma_foreign.html" %}


            </div>
        </div>
    </div>
    {% include "diploma/diploma_admission_exam.html" %}


    <div class="panel panel-default" id="pnl_professinal_experience" style="">
        <div class="panel-heading">Expériences professionnelles</div>
        <div class="panel-body">
            <div class="row">
                <div class="col-md-12">
                    <label>Avez-vous été inscrit(e) ou allez-vous être inscrit(e) à un examen de la valorisation des acquis et expériences professionnelles (VAE)?</label>
                    <br>
                    <label class="radio-inline">
                      <input type="radio"
                             name="professional_experience"
                             id="rdb_professional_experience_true"
                             value="true"
                             onclick="display('pnl_professional_experience_detail',true);"
                             {%if object_application.professional_experience = True %}checked{%endif%}> Oui
                    </label>
                    <label class="radio-inline">
                      <input type="radio"
                             name="professional_experience"
                             id="rdb_professional_experience_false"
                             value="false"
                             onclick="display('pnl_professional_experience_detail',false);"
                             {%if object_application.professional_experience = False %}checked{%endif%}> Non
                    </label>
                    {%if validation_messages and validation_messages|get_item:'professional_experience'%}
                        <br>
                        <font class="alert alert-danger" role="alert" style="margin-left:5px;">{{ validation_messages|get_item:'professional_experience'}}</font><br>
                    {% endif %}
                </div>
            </div>
            <br>
            Information sur VAE : <a href="https://www.uclouvain.be/vae.html">https://www.uclouvain.be/vae.html</a>
            <div id="pnl_professional_experience_detail"
                 style="{% if object_application.professional_experience = True %}visibility:visible;display:block;{%else%}visibility:hidden;display:none;{%endif%}">
                <div class="form-inline">
                    <br>
                    <label>A quelle session (date)? *</label>
                    <input class="form-control"
                           id="txt_professional_experience_date"
                           name="professional_experience_date">
                     {%if validation_messages and validation_messages|get_item:'professional_experience_date'%}
                        <br><br>
                        <font class="alert alert-danger" role="alert" style="margin-left:5px;">{{ validation_messages|get_item:'professional_experience_date'}}</font><br>
                    {% endif %}
                    <br>
                    <br>
                    <label>Auprès de quel établissement (nom)? *</label>
                    <input class="form-control"
                           id="txt_professional_experience_enterprise"
                           name="professional_experience_enterprise">
                    <br>
                    {%if validation_messages and validation_messages|get_item:'professional_experience_enterprise'%}
                        <br><br>
                        <font class="alert alert-danger" role="alert" style="margin-left:5px;">{{ validation_messages|get_item:'professional_experience_enterprise'}}</font><br>
                    {% endif %}
                </div>
                <br>
                <br>
                <label>Quel résultat avez-vous obtenu? *</label>
                <br>
                <label class="radio-inline">
                  <input type="radio"
                         name="result"
                         id="rdb_aprofessional_experienceresult_less_65"
                         value="LESS_65"
                         {%if object_application.result < 65 %}checked{%endif%}> Moins de 65%
                </label>
                <label class="radio-inline">
                  <input type="radio"
                         name="result"
                         id="rdb_professional_experience_result_between_65_75"
                         value="BETWEEN_65_75"
                         {%if object_application.result >= 65 and object_application.result <= 75%}checked{%endif%}> Entre 65 et 75%
                </label>
                <label class="radio-inline">
                  <input type="radio"
                         name="result"
                         id="rdb_professional_experience_result_more_75" value="MORE_75"
                         {%if object_application.result > 75 %}checked{%endif%}> Plus de 75%
                </label>
                <br>
                {%if  validation_messages and validation_messages|get_item:'result'%}
                    <font class="alert alert-danger" role="alert" style="margin-left:5px;">{{ validation_messages|get_item:'result'}}</font>
                {% endif %}
                <br>
                <label>Veuillez joindre une copie de votre certificat ou une preuve d'inscription à l'examen</label>
                &nbsp;&nbsp;<input type="button" value="Cliquez-ici pour joindre"/>
            </div>

        </div>
    </div>
{% include "diploma/diploma_french_exam.html" %}
    {%if validation_messages and validation_messages|get_item:'final'%}
        <br>
        <span class="alert alert-danger" role="alert" style="margin-left:5px;">{{ validation_messages|get_item:'final'}}</span><br><br>
    {% endif %}
    <br>
    <div>
        <button type="submit" id="bt_previous_step_down" class="btn btn-default" role="button"
                                    title="Etape précédente">
                                    <span class="glyphicon glyphicon-step-backward" aria-hidden="true"></span>Etape précédente</button>
        <button type="submit" id="bt_save_down" class="btn btn-default" role="button"
                                    title="Sauvegarder">
                                    <span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span>Sauvegarder</button>
        <button type="submit" id="bt_next_step_down" name="bt_next_step_down" class="btn btn-default" role="button"
                                    title="Etape suivante">
                                    <span class="glyphicon glyphicon-step-forward" aria-hidden="true"></span>Etape suivante</button>

    </div>
</form>
{% endblock %}
